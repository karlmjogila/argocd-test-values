# Base configuration - shared across all environments
# Using common-service chart with StatefulSet

global:
  name: "redis-cache"
  namespace: "test-redis-cache"
  labels:
    app.kubernetes.io/component: cache
    owner: test-team

statefulSets:
  redis:
    image: "redis:7-alpine"
    replicas: 1
    serviceAccount:
      disabled: true

    ports:
      - port: 6379
        targetPort: 6379

    command:
      - redis-server
    args:
      - --appendonly
      - "yes"

    resources:
      requests:
        cpu: 50m
        memory: 64Mi
      limits:
        cpu: 100m
        memory: 128Mi

    livenessProbe:
      exec:
        command: ["redis-cli", "ping"]
      initialDelaySeconds: 10
      periodSeconds: 10

    readinessProbe:
      exec:
        command: ["redis-cli", "ping"]
      initialDelaySeconds: 5
      periodSeconds: 5
